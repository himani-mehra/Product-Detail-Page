'use strict';mix_d("ExportAlternativeWidgetCards__export-alternative-card-desktop:export-alternative-card-desktop__Og4sjvxR","exports tslib @c/remote-operations @c/tracking @p/jQuery @c/metrics @p/A".split(" "),function(C,D,u,H,I,k,J){function A(a){return a&&"object"===typeof a&&"default"in a?a:{"default":a}}var K=A(u),d=A(I),v=A(J),w;(function(a){a.US="ATVPDKIKX0DER";a.UK="A1F83G8C2ARO7P";a.DE="A1PA6795UKMFR9";a.FR="A13V1IB3VIYZZH";a.IT="APJ6JRA9NG5V4";a.ES="A1RKKUPIHCS9HS";a.JP="A1VC38T7YXB528";
a.AU="A39IBJ37TRP1C6";a.SG="A19VAU5U5O7RUS"})(w||(w={}));var l;(function(a){a.DETAIL_DESKTOP_OUT_OF_STOCK="#exports_desktop_outOfStock_buybox_export_alternative_widget_ingress_feature_div";a.DETAIL_DESKTOP_UNQUALIFIED="#exports_desktop_unqualifiedBuybox_export_alternative_widget_ingress_feature_div";a.DETAIL_DESKTOP_UNDELIVERABLE="#exports_desktop_undeliverable_buybox_cta_feature_div";a.DETAIL_MOBILE_OUT_OF_STOCK="#exports_mobile_outOfStock_buybox_export_alternative_widget_ingress_feature_div";a.DETAIL_MOBILE_UNQUALIFIED=
"#exports_mobile_unqualifiedBuybox_export_alternative_widget_ingress_feature_div";a.DETAIL_MOBILE_UNDELIVERABLE="#exports_mobile_undeliverable_buybox_cta_feature_div";a.DETAIL_MOBILEAPP_OUT_OF_STOCK="#exports_mobileapp_outOfStock_buybox_export_alternative_widget_ingress_feature_div";a.DETAIL_MOBILEAPP_UNQUALIFIED="#exports_mobileapp_unqualifiedBuybox_export_alternative_widget_ingress_feature_div";a.DETAIL_MOBILEAPP_UNDELIVERABLE="#exports_mobileapp_undeliverable_buybox_cta_feature_div";a.GSOD_DESKTOP_OUT_OF_STOCK=
"#outOfStockBuyBox_feature_div";a.GSOD_DESKTOP_UNQUALIFIED="#unqualifiedBuyBox_feature_div";a.GSOD_DESKTOP_UNDELIVERABLE="#exportAlternativeWidget_feature_div";a.GSOD_MOBILE_UNQUALIFIED="#unqualified_feature_div";a.TEST="#exportAlternativeWidgetTestMarker"})(l||(l={}));var y;(function(a){a.DISABLED_ATC="#exports-buybox-disabled-atc";a.SEE_ALL_BUYING_OPTIONS="#buybox-see-all-buying-choices"})(y||(y={}));var m;(function(a){a.TRIGGER_BUTTON="#exportAlternativeTriggerButton";a.TRIGGER_CONTENT=".export-alternative-trigger-content";
a.MODAL_PRELOAD="#a-popover-exportAlternativeModal";a.SHEET_PRELOAD="#exportAlternativeSheetPreloadContent";a.ASINS_INFO="#exportAlternativeAsinsInfo";a.CONTENT_TITLE="#exportAlternativeContentTitle";a.COUNTRY_CODE="#exportAlternativeShipToCountryCode";a.COUNTRY_NAME="#exportAlternativeShipToCountryName";a.MARKETPLACE_ID="#exportAlternativeMarketplaceId";a.IMPORT_FEE_ROW="#exportAlternativeImportFeeRow";a.ENERGY_EFFICIENCY_ROW="#exportAlternativeEnergyEfficiencyRow"})(m||(m={}));var z;(function(a){a.ENERGY_EFFICIENCY_CONTAINER=
".energyEfficiencyContainer";a.ENERGY_EFFICIENCY_FICHE_LABEL=".energyEfficiencyProductFicheLabel"})(z||(z={}));var r;(function(a){a.DETAIL_OUT_OF_STOCK="detail_out_of_stock";a.DETAIL_UNQUALIFIED="detail_unqualified";a.DETAIL_UNDELIVERABLE="detail_undeliverable";a.TEST="test"})(r||(r={}));var E;(function(a){a.PRODUCT_API_ERROR="productApiError";a.ITEM_NOT_BUYABLE="itemNotBuyable";a.ITEM_NO_IMPORT_DETAILS="itemNoImportDetails";a.ITEM_NOT_DELIVERABLE="itemNotDeliverable";a.ITEM_MISSING_INFO="itemMissingInfo";
a.PRICE_WRONG_FORMAT="priceWrongFormat";a.AGG_ERROR="aggregatedError";a.WEBLAB_ERROR="unknownTreatment"})(E||(E={}));var F;(function(a){a.FREE_SHIPPING="FREE_SHIPPING";a.UPSELL="UPSELL";a.NONE="NONE"})(F||(F={}));var h;(function(a){a.GET_CONTENT="exportAlternativeWidgetGetContent";a.TRIGGER_SHOW="exportAlternativeWidgetTriggerShow";a.TRIGGER_CLICK="exportAlternativeWidgetTriggerClick";a.VARIANT_DETAIL_OUT_OF_STOCK="exportAlternativeWidgetVariantDetailOutOfStock";a.VARIANT_DETAIL_UNDELIVERABLE="exportAlternativeWidgetVariantDetailUndeliverable";
a.VARIANT_DETAIL_UNQUALIFIED="exportAlternativeWidgetVariantDetailUnqualified";a.VARIANT_NOT_FOUND="exportAlternativeWidgetVariantNotFound";a.CONTENT_SUCCESS="exportAlternativeWidgetContentSuccess";a.CONTENT_FAILURE="exportAlternativeWidgetContentFailure";a.ITEM_COUNT="exportAlternativeWidgetItemCount";a.ITEM_CLICK="exportAlternativeWidgetItemClick";a.IMPORT_FEE_DEPOSIT_ROW_SHOW="exportAlternativeWidgetImportFeeDepositRowShow";a.ENERGY_EFFICIENCY_LABAL_SHOW="exportAlternativeWidgetEnergyEfficiencyLabelShow";
a.ENERGY_EFFICIENCY_LABAL_CLICK="exportAlternativeWidgetEnergyEfficiencyLabelClick";a.ATC_CLICK="exportAlternativeWidgetAtcClick";a.ATC_SUCCESS="exportAlternativeWidgetAtcSuccess";a.ATC_FAILURE="exportAlternativeWidgetAtcFailure";a.MOBILE_POSTFIX="Mobile"})(h||(h={}));u={};u[w.US]={showImportFeeDepositAndTotalLandingCost:!0};u[w.UK]={showEnergyEfficiency:!0};u[w.DE]={showEnergyEfficiency:!0};u[w.ES]={showEnergyEfficiency:!0};u[w.FR]={showEnergyEfficiency:!0};u[w.IT]={showEnergyEfficiency:!0};u;var L=
function(a){var f=d["default"](m.TRIGGER_BUTTON),e=d["default"](m.IMPORT_FEE_ROW),c=d["default"](m.ENERGY_EFFICIENCY_ROW),b=a?h.MOBILE_POSTFIX:"";f.length&&(k.count(h.TRIGGER_SHOW+b,1),f.click(function(){return k.count(h.TRIGGER_CLICK+b,1)}));e.length&&k.count(h.IMPORT_FEE_DEPOSIT_ROW_SHOW+b,1);c.length&&(k.count(h.ENERGY_EFFICIENCY_LABAL_SHOW+b,1),c.click(function(){return k.count(h.ENERGY_EFFICIENCY_LABAL_CLICK+b,1)}))},M=function(){var a=d["default"](l.GSOD_DESKTOP_OUT_OF_STOCK).length||d["default"](l.DETAIL_DESKTOP_OUT_OF_STOCK).length||
d["default"](l.DETAIL_MOBILE_OUT_OF_STOCK).length||d["default"](l.DETAIL_MOBILEAPP_OUT_OF_STOCK).length,f=d["default"](l.GSOD_DESKTOP_UNQUALIFIED).length||d["default"](l.GSOD_MOBILE_UNQUALIFIED).length||d["default"](l.DETAIL_DESKTOP_UNQUALIFIED).length||d["default"](l.DETAIL_MOBILE_UNQUALIFIED).length||d["default"](l.DETAIL_MOBILEAPP_UNQUALIFIED).length,e=d["default"](l.GSOD_DESKTOP_UNDELIVERABLE).length||d["default"](l.DETAIL_DESKTOP_UNDELIVERABLE).length||d["default"](l.DETAIL_MOBILE_UNDELIVERABLE).length||
d["default"](l.DETAIL_MOBILEAPP_UNDELIVERABLE).length;if(a)return k.count(h.VARIANT_DETAIL_OUT_OF_STOCK,1),r.DETAIL_OUT_OF_STOCK;if(f)return k.count(h.VARIANT_DETAIL_UNQUALIFIED,1),r.DETAIL_UNQUALIFIED;if(e)return k.count(h.VARIANT_DETAIL_UNDELIVERABLE,1),r.DETAIL_UNDELIVERABLE;if(d["default"](l.TEST).length)return r.TEST;k.count(h.VARIANT_NOT_FOUND,1)},N=function(a,f,e){switch(f){case r.DETAIL_UNQUALIFIED:a.outerHTML&&d["default"](y.SEE_ALL_BUYING_OPTIONS).removeClass("a-button-primary").addClass("a-button-base");
break;case r.DETAIL_UNDELIVERABLE:a.outerHTML||d["default"](y.DISABLED_ATC).removeClass("aok-hidden");break;case r.TEST:a.outerHTML||d["default"](e?m.SHEET_PRELOAD:m.MODAL_PRELOAD).html('<span class="export-alternative-test-content-success"/>')}a.outerHTML&&(d["default"](e?m.SHEET_PRELOAD:m.MODAL_PRELOAD).html(a.outerHTML),d["default"](m.TRIGGER_CONTENT).removeClass("aok-hidden"),L(e),e&&d["default"](m.SHEET_PRELOAD).find&&d["default"](m.SHEET_PRELOAD).find(z.ENERGY_EFFICIENCY_CONTAINER).each(function(c,
b){d["default"](b).find&&(c=d["default"](b).find(z.ENERGY_EFFICIENCY_FICHE_LABEL).first(),c.hasClass&&c.hasClass("a-size-small")&&c.removeClass("a-size-small").addClass("a-size-micro"))}))},O=function(a,f){var e,c,b,g,p=JSON.stringify(null!==(e=d["default"](m.ASINS_INFO).data("asinsinfo"))&&void 0!==e?e:{});e=null!==(c=d["default"](m.CONTENT_TITLE).text())&&void 0!==c?c:"";c=null!==(b=d["default"](m.COUNTRY_CODE).text())&&void 0!==b?b:"";b=null!==(g=d["default"](m.COUNTRY_NAME).text())&&void 0!==
g?g:"";var t=M();if(t){var x=f?h.MOBILE_POSTFIX:"";k.count(h.GET_CONTENT+x,1);a({asinsInfo:p,contentTitle:e,countryCode:c,countryName:b},function(q,n){k.count(h.CONTENT_SUCCESS+x,1);N(q,t,f);null===n||void 0===n?void 0:n()},function(q,n){k.count(h.CONTENT_FAILURE+x,1);switch(t){case r.DETAIL_UNDELIVERABLE:d["default"](y.DISABLED_ATC).removeClass("aok-hidden")}null===n||void 0===n?void 0:n()})}},P=function(a,f){var e=f?h.MOBILE_POSTFIX:"",c=0;d["default"](".export-alternative-cta").each(function(b,
g){c++;b=d["default"](g).children(":first");var p=b.data("asin"),t=b.data("offerlistingid");p&&t&&d["default"](g).click(function(){k.count(h.ATC_CLICK+e,1);a({asin:""+p,offerListingId:""+t},function(x,q){k.count(h.ATC_SUCCESS+e,1);null===q||void 0===q?void 0:q();"app"===x.context.deviceSubType?location.replace("/gp/cart/view.html"):location.reload()},function(x,q){k.count(h.ATC_FAILURE+e,1);null===q||void 0===q?void 0:q()})})});k.count(h.ITEM_COUNT+"_"+c,1);d["default"](".export-alternative-product-link").each(function(b,
g){return d["default"](g).click(function(){return k.count(h.ITEM_CLICK+e,1)})})},G={},B=function(a,f,e){void 0===f&&(f="");void 0===e&&(e=1);f=a+f;G.hasOwnProperty(f)||(G[f]=!0,k.count(a,(k.count(a)||0)+e))},Q=function(a){B(v["default"].capabilities.mobile?"Card:EERU:SharedLib:mobile:render":"Card:EERU:SharedLib:desktop:render");var f=function(c,b){c={$event:{preventDefault:v["default"].$.noop,stopPropagation:v["default"].$.noop},$target:c.getContent().find('[data-a-tab-name="'+b+'"]'),data:{name:"energyEfficiencyTabSet"}};
v["default"].trigger("a:declarative:a-tabs:click",c)},e=function(c,b){var g=c&&c.$event,p=c&&c.data||{},t=p.activeTabName,x=p.modalHeight,q=p.name;g&&g.preventDefault&&g.preventDefault();g&&g.stopPropagation&&g.stopPropagation();g=b.get(q);g||(v["default"].on("a:popover:beforeShow:"+q,function(n){n.popover&&n.popover.getContent&&(n=n.popover.getContent(),n.find(".a-manually-loaded").parent().css("min-height",x),v["default"].loadDescendantImagesManually(n))}),g=b.create(c.$target,p));g.show();f(g,
t)};a.when("a-secondary-view").execute("RegisterEnergyEfficiencyEventMobile",function(c){v["default"].declarative("card-energy-efficiency-secondary-view","click",function(b){B("Card:EERU:SharedLib:mobile:click",b&&b.data&&b.data.name||"");e(b,c)})});a.when("a-modal").execute("RegisterEnergyEfficiencyEventDesktop",function(c){v["default"].declarative("card-energy-efficiency-modal","click",function(b){B("Card:EERU:SharedLib:desktop:click",b&&b.data&&b.data.name||"");e(b,c)})})},R=function(a){a.when("ready").execute("EEBadgeProductFicheResize",
function(f){var e=v["default"].$;e(".energyEfficiencyContainer").each(function(c,b){c=e(b).find(".energyEfficiencyProductFicheLabel").first();b=e(b).find("svg").first();c.parent().outerHeight()>b.outerHeight()&&(c.removeClass("a-size-small"),c.addClass("a-size-micro"),c.parent().outerHeight()>b.outerHeight()&&c.parent().css("line-height","10px"))})})},S=function(){var a=window.P;Q(a);R(a)};C._operationNames=["getContent","addToCart"];C.card=function(){return D.__awaiter(void 0,void 0,void 0,function(){var a,
f,e;return D.__generator(this,function(c){S();a=K["default"].setup();f=function(b,g,p){H.addTracking(a.addToCart,{},"ex_alt_wg_atc_d")(b).then(g).catch(p)};e=function(b,g,p){a.getContent(b).then(function(t){return g(t,function(){return P(f,!1)})}).catch(p)};O(e,!1);return[2]})})}});
