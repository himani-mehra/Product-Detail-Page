'use strict';mix_d("VSEDistributionCards__vse-vw-dp-card:vse-vw-dp-card__7TqHmEQC","exports tslib @p/A @c/scoped-dom @c/weblabs @c/logger @c/metrics @p/a-modal @c/aui-untrusted-ajax @c/navigation @c/aui-carousel @c/browser-window".split(" "),function(qa,z,Qa,Ra,Sa,Ta,aa,Ua,Va,Wa,Xa,Ya){function A(a){return a&&"object"===typeof a&&"default"in a?a:{"default":a}}var c=A(Qa),H=A(Ra),Za=A(Sa),$a=A(Ta),ab=A(Ua),bb=A(Va),ra=A(Wa),cb=A(Xa),O=A(Ya),sa,B=function(a){var b=sa;Object.keys(a).length!==b.requiredNumOfFields&&
aa.count("invalidNumOfFields-"+b.producerId,1);a=JSON.stringify(a).replace(/\\\\/g,"");aa.event(JSON.parse(a),b.producerId,b.schemaId,{ssd:!1})},db=function(a){return function(b){return c["default"].$.extend({eventSource:a.eventSource,placementContext:a.placementContext,clientId:a.clientId,timestamp:new Date,userAgentData:navigator.userAgent,titleSessionId:"0",videoAsin:"",videoAsinList:a.videoAsinList||"",rankingStrategy:a.rankingStrategy||"",creativeId:a.creativeId,stringPayload:a.stringPayload||
""},b)}},eb=function(){return function(a,b,e){var g=this;this.map=[];this.onHorizontalIntersectionObserved=function(h){h.forEach(function(k){var l=g.childElems.indexOf(k.target);g.map=k.isIntersecting?z.__spread(g.map,[l]):g.map.filter(function(f){return f!==l});g.intersectingTargetsIndexes=g.map.sort(function(f,n){return f-n})})};this.onViewportIntersectionObserved=function(h){h[0].isIntersecting&&g.callback()};this.getElementsWhichAreInViewPort=function(){return g.intersectingTargetsIndexes};void 0===
a&&(a=null);this.callback=e;this.parentEle=a;this.childElems=Array.from(document.querySelectorAll(b));this.optionsForHorizontalIntersection={root:this.parentEle,rootMargin:"0px",threshold:.85};this.optionsForViewportIntersection={root:null,rootMargin:"-50% 0% -50% 0%",threshold:0};this.horizontalIntersectionObserver=new IntersectionObserver(this.onHorizontalIntersectionObserved,this.optionsForHorizontalIntersection);this.viewportIntersectionObserver=new IntersectionObserver(this.onViewportIntersectionObserved,
this.optionsForViewportIntersection);this.childElems.forEach(function(h){g.horizontalIntersectionObserver.observe(h)});this.viewportIntersectionObserver.observe(a)}}(),d={pageType:"",clientPrefix:"",deviceType:"",placement:"",metricsPlacement:"",cardId:"",creativeId:"",requester:"",buildCsmPayload:function(a){},enableMultipleImpressions:!1,clientName:"",isIvxOpen:!1},q=function(a,b){void 0===b&&(b=1);try{aa.count("vse:csm:cards:"+d.clientPrefix+":"+a,b)}catch(e){v("failed to post CSM metric","ERROR")}},
E=function(a,b){void 0===b&&(b=1);q(a+":"+d.deviceType,b)},v=function(a,b){$a["default"].log("VSEWidgetCards: "+a+". Client prefix: "+d.clientPrefix+", Page type: "+d.pageType,b,"VSEDistributionCards")},ua=function(a,b,e){var g,h;try{if(c["default"].$("."+d.cardId).length){var k=!1,l=b.map(function(m){return m.contentId}).join(","),f=b.filter(function(m){return""!==m.metadata.rankingStrategy}).map(function(m){return m.metadata.rankingStrategy}).join(","),n=d.buildCsmPayload({eventName:d.clientPrefix+
":cardWidgetRendered",intPayload:1,videoAsinList:l,rankingStrategy:f});B(n);q("cardWidgetRendered",1);var r=function(){c["default"].delay(function(){var m=x.getElementsWhichAreInViewPort();if(m){var p=b.filter(function(F,I){return m.includes(I)});fb(p)}},500)},t=function(){for(var m=e.carouselItemClassName,p=0;p<b.length;p++)if(!b[p].impressionRecorded){var F=c["default"].$("."+d.cardId+" ."+m+":nth-child("+(p+1)+")");if(c["default"].onScreen(F,0))ta(b,p),b[p].impressionRecorded=!0;else break}},u=
function(){if(k)c["default"].off(c["default"].constants.BROWSER_EVENTS.SCROLL,u);else{var m=d.buildCsmPayload({eventName:d.clientPrefix+":cardWidgetScrolledInView",intPayload:1,videoAsinList:l,rankingStrategy:f}),p=c["default"].$("."+d.cardId+" ."+e.carouselItemClassName).first();p&&c["default"].onScreen(p,0)&&(B(m),m=c["default"].now()-a,q("cardWidgetScrolledInViewTime",m),E("cardWidgetScrolledInView"),k=!0,t())}};if(d.enableMultipleImpressions){var J=null===(h=null===(g=document.querySelector("."+
e.carouselItemClassName))||void 0===g?void 0:g.parentElement)||void 0===h?void 0:h.parentElement;var x=new eb(J,"."+e.carouselItemClassName,function(){var m=d.buildCsmPayload({eventName:d.clientPrefix+":cardWidgetScrolledInView",intPayload:1,videoAsinList:l,rankingStrategy:f});B(m);m=c["default"].now()-a;q("cardWidgetScrolledInViewTime",m);E("cardWidgetScrolledInView");r()})}else u(),c["default"].on(c["default"].constants.BROWSER_EVENTS.SCROLL,u);c["default"].on("vse:"+d.clientPrefix+":searchform:focus",
function(){var m=d.buildCsmPayload({eventName:d.clientPrefix+":serchFormFocus",intPayload:1,videoAsinList:l,rankingStrategy:f});B(m)});e.widgetMetricsHandler(d.enableMultipleImpressions?r:t,function(m){var p=d.buildCsmPayload({eventName:d.clientPrefix+":"+m+":paginationButtonClicked",intPayload:1});q(m+":paginationButtonClicked",1);B(p)})}}catch(m){v("Error occurred while emitting widget metrics "+m,"ERROR"),q("widgetMetricsEmissionError")}},fb=function(a){for(var b=0;b<a.length;b++)ta(a,b)},ta=function(a,
b){a=d.buildCsmPayload({eventName:d.clientPrefix+":thumbnailImpression",intPayload:b,videoAsin:a[b].contentId,rankingStrategy:a[b].metadata.rankingStrategy});B(a)},gb=function(a,b){var e=[];a=a.split(",");0<a.length&&a.forEach(function(g){g=g.split(":");1<g.length&&e.push({name:g[0],assignment:g[1],ignoreForG2S2Key:b})});return e},ba=function(a,b,e,g,h){void 0===h&&(h=3);h--;bb["default"].post(a,{accepts:"*/*",contentType:"application/json;charset=UTF-8",timeout:3E3},b).then(function(k){e(k)}).catch(function(k){0===
k.statusCode?v("Request has failed with unknown status code. Payload: "+JSON.stringify(b),"ERROR"):0<h?ba(a,b,e,g,h):g(k)})},hb=function(a,b){a="/gp/mobile/tag/?ref=vse_cards_ingress"+a+b.replace("/?_encoding=UTF8","");ba(a,{},function(){},function(){})},ib=function(a,b,e,g,h,k){void 0===k&&(k=!0);var l=a.map(function(f){delete f.htmlEl;return f});b||(b=va(a[0],{}));a=[];e.weblabContext&&(a=gb(e.weblabContext,!0));ba(e.nilgiriEndpoint,{requester:d.requester,clientPrefix:d.clientPrefix,page:d.pageType,
placement:d.placement,device:d.deviceType,metadata:{id:"vse-video-widget-card-"+d.clientPrefix,celQueryStringParam:e.celQueryStringParam,requestHasVideoData:"true"},videoDataList:k?l:void 0,video:{contentID:b.contentId,contentIDType:"VIDEO_ID",videoURL:b.videoUrl,imageURL:b.imageUrl,vendorCode:b.vendorCode,vendorTrackingId:b.vendorTrackingId,videoReferenceId:b.videoReferenceId,videoTitle:b.title},marketplaceID:e.marketplaceId,locale:e.locale,product:{contentID:b.productAsin,contentIDType:"ASIN",parentContentID:b.parentAsin,
parentContentIDType:"ASIN"},creativeId:d.creativeId,weblabContext:a},g,h)},va=function(a,b){var e=a.productAsin;e||c["default"].objectIsEmpty(a.metadata.relatedProductsAsins)||(e=a.metadata.relatedProductsAsins.split(",")[0]);var g=a.contentId,h=a.metadata.title,k=a.metadata.vendorName,l=a.metadata.vendorCode,f=a.metadata.entityId,n=a.metadata.entityType,r=a.metadata.fullReviewLink,t=a.metadata.title,u=a.metadata.videoURL,J=a.metadata.formattedDuration,x=a.metadata.videoImageUrl,m=a.parentAsin,p=
"vse-cards-ingress"+a.index,F=a.metadata.relatedProductsAsins,I=a.metadata.vendorTrackingId,S=a.metadata.referenceId,jb=a.index,G=a.metadata.closedCaptions,wa=[];if(G&&(G=G.split(","),0===G.length%2))for(var T=0;T<G.length;T+=2)void 0!==G[T+1]&&wa.push({locale:G[T],url:G[T+1]});b={contentId:g,title:h,vendorName:k,vendorCode:l,entityId:f,entityType:n,referenceUrl:r,referenceLinkTitle:t,videoUrl:u,duration:J,imageUrl:x,videoVoteContainer:{},productAsin:e,parentAsin:m,refTag:p,relatedProducts:F,vendorTrackingId:I,
videoReferenceId:S,index:jb,$el:b,closedCaptions:wa,videoDetailPageLink:a.metadata.videoDetailPageLink,impressionRecorded:a.impressionRecorded,lastPlayingTimestamp:a.lastPlayingTimestamp,htmlEl:a.htmlEl,rankingStrategy:a.metadata.rankingStrategy,aciContentId:a.metadata.aciContentId,videoMimeType:a.metadata.videoMimeType,profileLink:a.metadata.profileLink,profileImageUrl:a.metadata.profileImageUrl,source:""===a.metadata.source?"VSE":a.metadata.source};"true"===a.metadata.isSponsoredBrandVideo&&(g=
{adFeedbackUrl:a.metadata.adFeedbackUrl||"",clickTrackerUrl:a.metadata.clickTrackerUrl||"",instrumentationPixelUrl:a.metadata.instrumentationPixelUrl||"",trackingPixelUrl:a.metadata.trackingPixelUrl||"",linkUrl:a.metadata.linkUrl||""},b=z.__assign(z.__assign({},b),{sponsoredBrandVideoMetadata:g,isSponsoredBrandVideo:a.metadata.isSponsoredBrandVideo}));return b},ca=function(a,b,e){var g=[];[].forEach.call(a,function(h,k){var l=h.dataset.asin,f=h.dataset;if(l){l={contentId:l,productAsin:f.productAsin||
"",parentAsin:f.parentAsin||"",metadata:{videoImageUrl:f.videoImageUrlUnchanged||f.videoImageUrl||"",videoURL:f.videoUrl||f.videoURL||"",title:f.title||"",formattedDuration:f.formattedDuration||"",vendorName:f.vendorName||"",vendorCode:f.vendorCode||"",referenceId:f.referenceId||"",fullReviewLink:f.referenceUrl||"",videoDetailPageLink:f.videoDetailPageLink||"vdp/"+l+b.celQueryStringParam,asin:f.asin||"",vendorTrackingId:f.vendorTrackingId||"",relatedProductsAsins:f.relatedProductsAsins||"",closedCaptions:f.closedCaptions||
"",creatorType:f.creatorType||"",publicName:f.publicName||"",profileLink:f.profileLink||"",profileImageUrl:f.profileImageUrl||"",rankingStrategy:f.rankingStrategy||"",aciContentId:f.csaCItemId||"",videoMimeType:f.videoMimeType||"",entityId:f.entityId||"",entityType:f.entityType||"",videoImageHeight:f.videoImageHeight||"",videoImageWidth:f.videoImageWidth||"",videoImagePhysicalId:f.videoImagePhysicalId||"",videoImageExtension:f.videoImageExtension||"",groupType:f.groupType||"",source:f.source||""},
impressionRecorded:!1,lastPlayingTimestamp:0,index:k,htmlEl:h};"true"===f.isSponsoredBrandVideo&&(h=h.querySelectorAll("."+e.vseSbVideoDataItem)[0])&&(h={adFeedbackUrl:h.dataset.adFeedbackUrl||"",clickTrackerUrl:h.dataset.clickTrackerUrl||"",instrumentationPixelUrl:h.dataset.instrumentationPixelUrl||"",trackingPixelUrl:h.dataset.trackingPixelUrl||"",linkUrl:h.dataset.linkUrl||"",isSponsoredBrandVideo:f.isSponsoredBrandVideo,videoDetailPageLink:f.vdpUrl||""},l.metadata=z.__assign(z.__assign({},l.metadata),
h));g.push(l);k=H["default"].cardRoot.getElementsByClassName(e.vseVideoDataItem)[k];try{f.profileLink&&f.profileImageUrl&&k&&xa(k,k.querySelector("."+e.vseProfilePlaceholder),e.vseVideoThumbnailProfile)}catch(n){v("Exception has occurred while initializing profiles. Exception details: "+n,"ERROR"),q("profileInitializationFailure",1)}try{""!==f.disclosureText&&""!==f.disclosureLink&&k&&xa(k,k.querySelector("."+e.vseVideoCreatorContainer),e.vseVideoDisclosure)}catch(n){v("Exception has occurred while moving the disclosure link. Exception details: "+
n,"ERROR"),q("moveDisclosureElementFailure",1)}}});return g},xa=function(a,b,e){a=a.querySelector("."+e);b&&a&&a.parentNode&&(b.appendChild(a.cloneNode(!0)),a.parentNode.removeChild(a),(b=b.querySelector("."+e))&&b.classList.remove("aok-hidden"))},ya=function(a){var b=O["default"].innerHeight*(400<=a.height()?.1:.2),e=O["default"].innerHeight-a.height()-b;return O["default"].scrollY+e>=a.offset().top&&O["default"].scrollY+b<=a.offset().top},V=function(){return O["default"].innerWidth>O["default"].innerHeight},
y,W=!1,za,da,C,w,P,ea=!1,fa,U,Q,D,K,L,M,X=!1,Aa=!0,Ba=!1,ha,ia=0,Y,Ca=null,pb=function(a,b,e,g,h,k,l,f){void 0===h&&(h=!1);void 0===k&&(k=!0);void 0===l&&(l=!1);void 0===f&&(f=void 0);return z.__awaiter(void 0,void 0,void 0,function(){var n,r,t;return z.__generator(this,function(u){try{P=e;w=b;C=a;X=h;Aa=k;Ba=l;n=c["default"].now();sa={schemaId:"vse.VSECardsEvents.7",producerId:"vsemetrics_widgetcards",requiredNumOfFields:13};L=H["default"].cardRoot.getElementsByClassName(w.vseVideoDataItem);if(!L)return q("noCardsIngressDom"),
R(),[2];0<c["default"].$(".vse-video-thumbnail-wrapper .vse-video-thumbnail-preview").length&&(Y=c["default"].$(".vse-video-thumbnail-wrapper .vse-video-thumbnail-preview"),c["default"].on(c["default"].constants.BROWSER_EVENTS.SCROLL,ja),ja());if((r=H["default"].cardRoot.getElementsByClassName(w.vseWidgetPageState))&&r[0]&&r[0].dataset){K=r[0].dataset;y=ca(L,K,w);u=K;var J=f,x,m,p;void 0===J&&(J="vse_cards");d.deviceType=C?"Mobile":"Desktop";d.pageType=u.client||"Gateway";d.clientName=null!==(x=u.clientName)&&
void 0!==x?x:"";var F;(F=u.clientPrefix)||(F="IVE_VFTP"==d.clientName?d.clientName.toLowerCase():d.pageType.toLowerCase());d.clientPrefix=F;d.placement=(""!==d.clientName?d.clientName:d.pageType)+"Card-"+d.deviceType;d.metricsPlacement=(c["default"].capabilities.mobile?c["default"].capabilities.isAmazonApp?"mobile_app":"mobile_web":c["default"].capabilities.tablet?c["default"].capabilities.isAmazonApp?"tablet_app":"tablet_web":"desktop_web")+"."+d.placement+"."+J;d.cardId=null!==(m=u.cardId)&&void 0!==
m?m:"";d.creativeId=null!==(p=u.creativeId)&&void 0!==p?p:"";d.requester=u.requester||"VSEWidgetCards";d.enableMultipleImpressions="T1"===u.enableMultipleImpressions;fa="vse-component-feed-carousel-"+d.cardId;Q="vse-widget-popover-"+d.cardId;if(!c["default"].capabilities.video)return q("videoNotSupported"),[2];E("cardWidgetRendered");var I=y[0].productAsin?y[0].productAsin:"";d.buildCsmPayload=db({placementContext:d.metricsPlacement,clientId:"VSE",eventSource:"VSEWidgetCards",stringPayload:null!==
I&&void 0!==I?I:"",creativeId:d.creativeId});if(C||"Detail"===d.pageType)ua(n,y,g);else{c["default"].$("."+d.cardId+" [class*=vsePlaceholder] .a-fixed-right-grid-inner").addClass(w.vseNoRightPadding);x=n;try{Da(x,g,"vse-carousel-items-added-"+fa),Da(x,g,"vse:cards:"+d.clientPrefix+":quad:ready")}catch(S){ka(S)}c["default"].trigger("vse-card-ready-"+fa)}(t=c["default"].capabilities.isAmazonApp&&c["default"].capabilities.android&&(c["default"].capabilities.androidVersion+"").startsWith("8"))?(q("useMshopAutoplayFallback"),
R()):(kb(),lb(),mb(),nb(),ob());"gatewayquad"===d.clientPrefix&&c["default"].trigger("vse:cards:"+d.clientPrefix+":quad:ready");X&&(Ea(null,c["default"].now()),Fa())}else q("pageStateNotFound"),R()}catch(S){v("fatal exception has occurred. Exception details: "+S,"FATAL"),q("widgetFatalException"),R()}return[2]})})},Da=function(a,b,e){c["default"].off(e);c["default"].on(e,function(){W||(W=!0,y=ca(L,K,w),ua(a,y,b))})},lb=function(a){void 0===a&&(a="click touch");c["default"].declarative("vse-widget-carousel-see-more-"+
d.cardId,a,function(){return Ga()});c["default"].declarative("vse-widget-carousel-custom-action-"+d.cardId,a,function(b){var e;(b=null===(e=b.data)||void 0===e?void 0:e.link)?(Ha("widgetCustomActionClicked"),ra["default"].setLocation(b)):Ga()})},Ga=function(){C&&(ea=!0);c["default"].$("."+d.cardId+" .vse-cards-ingress-carousel").find(".vse-carousel-item").first().click();Ha("seeMoreLinkClicked")},Ha=function(a){E(a);a=d.buildCsmPayload({eventName:d.clientPrefix+":"+a,intPayload:1});B(a)},mb=function(){var a=
0;c["default"].off("a:popover:afterShow:vse-widget-popover-"+d.cardId);c["default"].on("a:popover:afterShow:vse-widget-popover-"+d.cardId,function(b){try{if(c["default"].$(b.popover.$popover).addClass(c["default"].$("#"+Q).data("cssClass")),a++,da=!0,1===a){c["default"].$(b.popover.$popover).addClass(w.vseVerticalLightbox);var e=c["default"].now();D&&D.refresh();X?(c["default"].$(b.popover.$popover).addClass(w.vseRemoveAbsolute),la()):(Ea(b.popover.$popover,e),Fa())}else la()}catch(g){ka(g)}})},Ea=
function(a,b){c["default"].on(d.clientPrefix+":vse:player:registered",function(){c["default"].$("#"+Q+" [class*=_vseWidgetLbVideoBlock_]").first().animate({opacity:1});if(da){la();c["default"].$(a).addClass(w.vseRemoveAbsolute);var e=c["default"].now()-b;E("cardWidgetPopoverContentWaitTime",e)}});c["default"].on("vse:cards:"+d.clientPrefix+":componentbuilder:failed",function(){Ia();D?D.hide():c["default"].trigger("vse:cards:"+d.cardId+":secondary:view:close");X||c["default"].delay(function(){ra["default"].setLocation(M.videoDetailPageLink)},
500)})},la=function(){ea&&c["default"].trigger("vse:"+d.clientPrefix+":page:watchAllClicked");ea=!1;var a={assetSpec:M,lightBoxId:""+Q};!0===Ba&&Ca!==M.contentId&&(Ca=M.contentId,a.lazyLoadProductAsin=M.productAsin);c["default"].trigger("vse:"+d.clientPrefix+":page:lightBoxOpened",a);a=c["default"].$("#"+Q+" [class*=_vseWidgetLbVideoBlock_]");0<a.length&&(U=a.get(0),null!=P&&(qb(U),P.elect(U)))},nb=function(){c["default"].off("a:popover:beforeHide:vse-widget-popover-"+d.cardId);c["default"].on("a:popover:beforeHide:vse-widget-popover-"+
d.cardId,function(){da=!1;za?(c["default"].trigger("vse:"+d.clientPrefix+":page:lightBoxClosed"),null!=P&&U&&P.unsubscribe(U)):E("cardWidgetLBClosedBeforeAjax")})},Fa=function(){ib(y,M,K,function(a){za=!0;q("preloadSuccess");c["default"].$("#"+Q+" [class*=_vseWidgetLbVideoBlock_]").html(a.responseBody)},function(a){c["default"].trigger("vse:cards:"+d.clientPrefix+":componentbuilder:failed");E("preloadFailed");q("preloadFailed:"+a.statusCode);v("NilgiriService componentbuilder call has failed.\n        Status code: "+
a.statusCode+". Status text: "+a.statusText,"FATAL");R()},Aa)},R=function(){var a=H["default"].cardRoot.getElementsByClassName(w.vseSeeMoreLink)[0];a&&a.classList&&a.classList.add("aok-hidden")},kb=function(){try{[].forEach.call(L,function(a){a.children[0].removeAttribute("target")}),Ja(),c["default"].$("."+d.cardId+" .vse-cards-ingress-carousel").delegate(".vse-carousel-item","click",function(a){W||(y=ca(L,K,w),W=!0);if(!c["default"].$(a.target).closest("."+w.vseProfilePlaceholder).length){a.preventDefault();
var b=c["default"].$(a.currentTarget);a=b.closest("li").index();var e=y[a];e.metadata&&(M=va(e,b),b=d.buildCsmPayload({eventName:d.clientPrefix+":cardWidgetClicked",intPayload:1,videoAsin:e.contentId,rankingStrategy:e.metadata.rankingStrategy}),E("cardWidgetClicked"),B(b),hb(a,K.celQueryStringParam),C?c["default"].trigger("vse:cards:"+d.cardId+":secondary:view:open"):(D=ab["default"].get(c["default"].$("."+d.cardId+" #vse-widget-popover-trigger")),c["default"].objectIsEmpty(D)?q("lbNotFoundDesktop"):
D.show()))}})}catch(a){ka(a)}},ka=function(a){v("fatal exception has occurred in LB. Exception details: "+a,"FATAL");q("lightboxOpenFatalException");R();Ia();D&&D.hide()},Ia=function(){Ja();[].forEach.call(L,function(a,b){a.children&&a.children[0]&&a.children[0].setAttribute("target",y[b].metadata.videoDetailPageLink)})},Ja=function(){c["default"].$("."+d.cardId+" .vse-cards-ingress-carousel").undelegate(".vse-carousel-item","click")},qb=function(a){P.subscribe(a,function(b){},{buffer:0})},ob=function(){c["default"].on(d.clientPrefix+
"-leave-pip",function(a){c["default"].$("."+d.cardId+" .vse-cards-ingress-carousel .vse-carousel-item")[a.index].click()})},Ka=function(a,b){ha[b]||(a=d.buildCsmPayload({eventName:d.clientPrefix+":thumbnailPreviewPlaybackStart",intPayload:b,videoAsin:a}),void 0!==a&&null!==a&&(B(a),ha[b]=!0))},ja=function(){c["default"].onScreen(c["default"].$(".vse-video-thumbnail-wrapper"),100)&&(c["default"].each(Y,function(a){var b=a.getAttribute("data-src");var e=void 0;void 0===e&&(e=1);e=3*(e-1);b=b.split(",")[e];
a.src=b;a.addEventListener("ended",rb)}),c["default"].off(c["default"].constants.BROWSER_EVENTS.SCROLL,ja),ha=Array(Y.length).fill(!1),C||sb(),tb(),c["default"].on(c["default"].constants.BROWSER_EVENTS.SCROLL,Z),Z())},sb=function(){c["default"].$(".vse-video-widget-container").delegate(".vse-desktop-carousel-card","mouseenter",function(){ma();var a=c["default"].$(this).find("video"),b=c["default"].$(this).find(".vse-video-thumbnail-img");La(b);0<a.length&&(a[0].play(),b=c["default"].$(this).closest("li").index(),
Ka(a[0].getAttribute("data-video-asin"),b),ia=0)});c["default"].$(".vse-video-widget-container").delegate(".vse-desktop-carousel-card","mouseleave",function(){var a=c["default"].$(this).find(".vse-video-thumbnail-img");na(a);a=c["default"].$(this).find("video");0<a.length&&oa(a[0])})},na=function(a){a&&0<a.length&&c["default"].fadeIn(a,300,"ease-in")},La=function(a){a&&0<a.length&&c["default"].fadeOut(a,300,"ease-in")},Ma=function(a){a=c["default"].$(".vse-video-widget-container ol li").eq(a);if(!a||
0!=a.length)return c["default"].$(a).find("video")[0]},Na=function(a){a=c["default"].$(".vse-video-widget-container ol li").eq(a);if(!a||0!=a.length)return c["default"].$(a).find(".vse-video-thumbnail-img")},pa=function(a){var b=Ma(a);if(b){var e=Na(a);La(e);b.play();ia=a;Ka(b.getAttribute("data-video-asin"),a)}},Z=function(){var a=c["default"].$(".vse-video-widget-container");if(0<a.length&&(!V()&&c["default"].onScreen(a)&&ya(a)||V()&&c["default"].onScreen(a))){c["default"].off(c["default"].constants.BROWSER_EVENTS.SCROLL,
Z);c["default"].on(c["default"].constants.BROWSER_EVENTS.SCROLL,Oa);a=C?Pa():ia;var b=Ma(a);if(!b||b.paused)ma(),pa(a)}},Oa=function(){var a=c["default"].$(".vse-video-widget-container");0!=a.length&&(!ya(a)&&!V()||V()&&!c["default"].onScreen(a))&&(c["default"].on(c["default"].constants.BROWSER_EVENTS.SCROLL,Z),c["default"].off(c["default"].constants.BROWSER_EVENTS.SCROLL,Oa))},ma=function(){c["default"].each(Y,function(a){if(0!==a.currentTime){var b=c["default"].$(a).closest(".vse-video-thumbnail-wrapper").find(".vse-video-thumbnail-img");
na(b);oa(a)}})},oa=function(a){setTimeout(function(){a.currentTime=0;a.load()},300)},Pa=function(){var a=0;try{var b=c["default"].$(".vse-video-widget-container"),e=parseInt(b.find("li").css("width").replace("px",""))+8,g=b.find("ol").css("-webkit-transform").split(/[()]/)[1],h=Math.abs(parseInt(g.split(",")[4]));a=Math.round(h/e)}catch(k){v("Error has occurred while finding the current focussed Element. Exception details: "+k,"ERROR")}return a},rb=function(a){try{var b=a.target.closest("li");oa(a.target);
var e=c["default"].$(b).index()+1;a=0;try{var g=c["default"].$(".vse-video-widget-container"),h=parseInt(g.find("li").css("width").replace("px","")),k=C?c["default"].$(window).width():c["default"].$(".vse-video-widget-container .a-carousel-viewport").width();a=Math.floor(k/(h+8))}catch(t){v("Error has occurred while finding the no of Thumbnails on screen. Exception details: "+t,"ERROR")}var l=a;var f=Math.ceil(e/l),n=Math.ceil((e+1)/l),r=Na(e-1);na(r);f===n&&pa(e)}catch(t){v("Error has occurred while playing the next preview. Exception details: "+
t,"ERROR")}},tb=function(){var a=c["default"].$(".vse-cards-carousel-container");cb["default"].getCarousel(a).on("change:pageNumber",function(){ma();setTimeout(function(){pa(Pa())},C?100:310)})},ub=function(a){var b=c["default"].capabilities.mobile;return{carouselItemClassName:a.carouselElement,widgetMetricsHandler:function(e,g){var h=c["default"].throttle(function(){e()},500,{leading:!1});c["default"].on(c["default"].constants.BROWSER_EVENTS.RESIZE,function(){e()});c["default"].$("."+d.cardId+" .a-carousel-goto-prevpage").click(function(){g("left");
h()});c["default"].$("."+d.cardId+" .a-carousel-goto-nextpage").click(function(){g("right");h()});b&&(c["default"].off("a:carousel:vse-cards-vw-dp:change:pageNumber"),c["default"].on("a:carousel:vse-cards-vw-dp:change:pageNumber",h))}}},N={thumbnailUpdates:"_vse-vw-dp-card_style_thumbnailUpdates__3sx2a",vseVideoImageWrapper:"_vse-vw-dp-card_style_vseVideoImageWrapper__3Sk54",vseCarouselItem:"_vse-vw-dp-card_style_vseCarouselItem__3IvFU",vseCarouselItemHovering:"_vse-vw-dp-card_style_vseCarouselItemHovering__3nydI",
vseHoverSection:"_vse-vw-dp-card_style_vseHoverSection__1n4YC",carouselElement:"_vse-vw-dp-card_style_carouselElement__AVBU9",vseMobileVideoWidget:"_vse-vw-dp-card_style_vseMobileVideoWidget__17sDD",vseDesktopCarousel:"_vse-vw-dp-card_style_vseDesktopCarousel__1UwLK",vseVideoDuration:"_vse-vw-dp-card_style_vseVideoDuration__vDK4S",vseVideoTitle:"_vse-vw-dp-card_style_vseVideoTitle__sPgV5",vseVideoTitleBlockOverlay:"_vse-vw-dp-card_style_vseVideoTitleBlockOverlay__ZyhF4",vseThumbnailSecondaryImg:"_vse-vw-dp-card_style_vseThumbnailSecondaryImg__2eoNE",
vseVideoTitleBlock:"_vse-vw-dp-card_style_vseVideoTitleBlock__Qp7Od",vseVideoTitleText:"_vse-vw-dp-card_style_vseVideoTitleText__1lJWI",vseVideoTitleWithCreator:"_vse-vw-dp-card_style_vseVideoTitleWithCreator__1Meqf",vseHasProfile:"_vse-vw-dp-card_style_vseHasProfile__28XGY",vseVideoCreatorName:"_vse-vw-dp-card_style_vseVideoCreatorName__3M1B_",vseProfilePlaceholder:"_vse-vw-dp-card_style_vseProfilePlaceholder__34FkJ",vseVideoThumbnailProfile:"_vse-vw-dp-card_style_vseVideoThumbnailProfile__1TFKR",
vseLazyLoadSpinner:"_vse-vw-dp-card_style_vseLazyLoadSpinner__2XtFC",vseVideoSegmentHeader:"_vse-vw-dp-card_style_vseVideoSegmentHeader__14ouc",vseFirstItem:"_vse-vw-dp-card_style_vseFirstItem__3h4BK",vseVideoWidgetHeaderBlock:"_vse-vw-dp-card_style_vseVideoWidgetHeaderBlock__2t4B0",vseVideoWidgetHeader:"_vse-vw-dp-card_style_vseVideoWidgetHeader__30B2I",vseWidgetPageState:"_vse-vw-dp-card_style_vseWidgetPageState__2eblq",vseVideoWidgetContainer:"_vse-vw-dp-card_style_vseVideoWidgetContainer__3HDIT",
vseIngressCarousel:"_vse-vw-dp-card_style_vseIngressCarousel__2Knkb",vseThumbnailPreviewImg:"_vse-vw-dp-card_style_vseThumbnailPreviewImg__3dlho",vseCardsVideoThumbnail:"_vse-vw-dp-card_style_vseCardsVideoThumbnail__3xlzJ",vseWidgetLbVideoBlock:"_vse-vw-dp-card_style_vseWidgetLbVideoBlock__VfqBF",vseWidgetLbVideoBlockWrapper:"_vse-vw-dp-card_style_vseWidgetLbVideoBlockWrapper__v6yOr",vseWidgetLbAbsolute:"_vse-vw-dp-card_style_vseWidgetLbAbsolute__bgBq7",vseWidgetLbSpinner:"_vse-vw-dp-card_style_vseWidgetLbSpinner__yjdTV",
vseVerticalLightbox:"_vse-vw-dp-card_style_vseVerticalLightbox__12YT2",vseRemoveAbsolute:"_vse-vw-dp-card_style_vseRemoveAbsolute__2xmeK",vseUploadButton:"_vse-vw-dp-card_style_vseUploadButton__5QCM8",vseUploadButtonIcon:"_vse-vw-dp-card_style_vseUploadButtonIcon__2-eZR",vseVideoDataItem:"_vse-vw-dp-card_style_vseVideoDataItem__2A7tm",vseVwdpWidgetPageState:"_vse-vw-dp-card_style_vseVwdpWidgetPageState__283lp",vseSbVideoDataItem:"_vse-vw-dp-card_style_vseSbVideoDataItem__1TmVd",thumbnailPreviewWrap:"_vse-vw-dp-card_style_thumbnailPreviewWrap__2sqTc",
vseSearchVideosInput:"_vse-vw-dp-card_style_vseSearchVideosInput__2CfoS",videoPreviewWrapper:"_vse-vw-dp-card_style_videoPreviewWrapper__vvNVU",clearSearchInput:"_vse-vw-dp-card_style_clearSearchInput__3ZK67",sponsoredVideoLabel:"_vse-vw-dp-card_style_sponsoredVideoLabel__23SsR"};qa._operationNames=[];qa.card=function(){return z.__awaiter(void 0,void 0,void 0,function(){var a,b,e,g,h,k,l,f,n;return z.__generator(this,function(r){switch(r.label){case 0:a=[".vse-segment-title-RVS_G1",".vse-segment-title-RVS_G2",
".vse-segment-title-RVS_G1_T1",".vse-segment-title-RVS_G2_T1"];a.forEach(function(t){c["default"].$(".vse-video-widget-dp-container ."+N.vseVideoDataItem).find(""+t).first().addClass(N.vseFirstItem)});b=c["default"].capabilities.mobile;e=ub(N);if(c["default"].capabilities.mobile&&c["default"].capabilities.isAmazonApp&&(g=H["default"].cardRoot.getElementsByClassName(N.vseVwdpWidgetPageState))&&g[0]&&g[0].dataset){h=g[0].dataset.searchAllVideosTreatment||"C";try{Za["default"].trigger("VSE_VWDP_SEARCHBAR_571449",
h),"T1"===h&&(c["default"].$("."+N.vseSearchVideosInput).removeClass("aok-hidden"),k=H["default"].cardRoot.getElementsByTagName("form")[0],l=k.getElementsByTagName("input")[0],l.addEventListener("focus",function(){c["default"].trigger("vse:detail:searchform:focus")}),f=H["default"].cardRoot.getElementsByClassName(N.clearSearchInput)[0],n=function(){""!==l.value?f.classList.remove("aok-hidden"):f.classList.add("aok-hidden")},l.addEventListener("keyup",n),n(),f.addEventListener("click",function(){l.value=
"";n();l.focus()}))}catch(t){v("Issue with VWDP Search form: "+t,"ERROR")}}return[4,pb(b,N,null,e,!0,!0)];case 1:return r.sent(),[2]}})})}});
